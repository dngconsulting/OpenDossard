{"openapi":"3.0.0","paths":{"/api/v2/auth/login":{"post":{"operationId":"AuthController_login_v2","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"401":{"description":"Connexion impossible, vérifiez vos identifiants ou mot de passe"}},"summary":"Login with email and password","tags":["Auth"]}},"/api/v2/auth/refresh":{"post":{"operationId":"AuthController_refresh_v2","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Tokens refreshed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensDto"}}}},"403":{"description":"Access denied"}},"summary":"Refresh access token","tags":["Auth"]}},"/api/v2/auth/logout":{"post":{"operationId":"AuthController_logout_v2","parameters":[],"responses":{"200":{"description":"Logout successful"}},"security":[{"JWT-auth":[]}],"summary":"Logout current user","tags":["Auth"]}},"/api/v2/auth/me":{"get":{"operationId":"AuthController_getProfile_v2","parameters":[],"responses":{"200":{"description":"User profile"},"401":{"description":"Unauthorized"}},"security":[{"JWT-auth":[]}],"summary":"Get current user profile","tags":["Auth"]}},"/api/v2/licences":{"get":{"operationId":"LicencesController_findAll_v2","parameters":[{"name":"offset","required":false,"in":"query","description":"Number of records to skip","schema":{"minimum":0,"default":0,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of records to return","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Global search term","schema":{"type":"string"}},{"name":"orderBy","required":false,"in":"query","description":"Field to order by","schema":{"type":"string"}},{"name":"orderDirection","required":false,"in":"query","schema":{"default":"ASC","type":"string","enum":["ASC","DESC"]}},{"name":"name","required":false,"in":"query","schema":{"type":"string"}},{"name":"firstName","required":false,"in":"query","schema":{"type":"string"}},{"name":"licenceNumber","required":false,"in":"query","schema":{"type":"string"}},{"name":"club","required":false,"in":"query","schema":{"type":"string"}},{"name":"dept","required":false,"in":"query","schema":{"type":"string"}},{"name":"fede","required":false,"in":"query","description":"Filter by federation","schema":{"type":"string"}},{"name":"gender","required":false,"in":"query","schema":{"type":"string"}},{"name":"birthYear","required":false,"in":"query","description":"Filter by birth year","schema":{"type":"string"}},{"name":"catea","required":false,"in":"query","description":"Filter by age category","schema":{"type":"string"}},{"name":"catev","required":false,"in":"query","description":"Filter by value category","schema":{"type":"string"}},{"name":"catevCX","required":false,"in":"query","description":"Filter by CX category","schema":{"type":"string"}},{"name":"saison","required":false,"in":"query","description":"Filter by season","schema":{"type":"string"}},{"name":"id","required":false,"in":"query","description":"Filter by ID","schema":{"type":"number"}},{"name":"withoutNumber","required":false,"in":"query","description":"Filter licences without licence number","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Paginated list of licences"}},"security":[{"JWT-auth":[]}],"summary":"Get all licences with pagination and filters","tags":["Licences"]},"post":{"operationId":"LicencesController_create_v2","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLicenceDto"}}}},"responses":{"201":{"description":"Licence created"}},"security":[{"JWT-auth":[]}],"summary":"Create a new licence","tags":["Licences"]}},"/api/v2/licences/search":{"get":{"operationId":"LicencesController_search_v2","parameters":[{"name":"q","required":true,"in":"query","description":"Search query","schema":{"type":"string"}},{"name":"type","required":false,"in":"query","description":"Competition type (CX, ROUTE)","schema":{"type":"string"}}],"responses":{"200":{"description":"List of matching licences"}},"security":[{"JWT-auth":[]}],"summary":"Search licences by name or number (autocomplete)","tags":["Licences"]}},"/api/v2/licences/{id}":{"get":{"operationId":"LicencesController_findOne_v2","parameters":[{"name":"id","required":true,"in":"path","description":"Licence ID","schema":{"type":"number"}}],"responses":{"200":{"description":"Licence details"},"404":{"description":"Licence not found"}},"security":[{"JWT-auth":[]}],"summary":"Get licence by ID","tags":["Licences"]},"patch":{"operationId":"LicencesController_update_v2","parameters":[{"name":"id","required":true,"in":"path","description":"Licence ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLicenceDto"}}}},"responses":{"200":{"description":"Licence updated"},"404":{"description":"Licence not found"}},"security":[{"JWT-auth":[]}],"summary":"Update a licence","tags":["Licences"]},"delete":{"operationId":"LicencesController_remove_v2","parameters":[{"name":"id","required":true,"in":"path","description":"Licence ID","schema":{"type":"number"}}],"responses":{"200":{"description":"Licence deleted"},"404":{"description":"Licence not found"}},"security":[{"JWT-auth":[]}],"summary":"Delete a licence","tags":["Licences"]}},"/api/v2/licences/import":{"post":{"operationId":"LicencesController_importCsv_v2","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":"Import result"}},"security":[{"JWT-auth":[]}],"summary":"Import licences from CSV file","tags":["Licences"]}},"/api/v2/competitions":{"get":{"operationId":"CompetitionsController_findAll_v2","parameters":[{"name":"offset","required":false,"in":"query","description":"Number of records to skip","schema":{"minimum":0,"default":0,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of records to return","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Global search term","schema":{"type":"string"}},{"name":"orderBy","required":false,"in":"query","description":"Field to order by","schema":{"type":"string"}},{"name":"orderDirection","required":false,"in":"query","schema":{"default":"ASC","type":"string","enum":["ASC","DESC"]}},{"name":"name","required":false,"in":"query","description":"Filter by name (partial match)","schema":{"type":"string"}},{"name":"zipCode","required":false,"in":"query","description":"Filter by zip code (partial match)","schema":{"type":"string"}},{"name":"fede","required":false,"in":"query","description":"Filter by federation (partial match)","schema":{"type":"string"}},{"name":"competitionType","required":false,"in":"query","description":"Filter by competition type (partial match)","schema":{"type":"string"}},{"name":"dept","required":false,"in":"query","description":"Filter by department (partial match)","schema":{"type":"string"}},{"name":"club","required":false,"in":"query","description":"Filter by club name (partial match)","schema":{"type":"string"}},{"name":"fedes","required":false,"in":"query","description":"Filter by multiple federations (comma-separated)","schema":{"type":"string"}},{"name":"competitionTypes","required":false,"in":"query","description":"Filter by multiple competition types (comma-separated)","schema":{"type":"string"}},{"name":"depts","required":false,"in":"query","description":"Filter by multiple departments (comma-separated)","schema":{"type":"string"}},{"name":"displayPast","required":false,"in":"query","description":"Show past competitions","schema":{"type":"boolean"}},{"name":"displayFuture","required":false,"in":"query","description":"Show future competitions","schema":{"type":"boolean"}},{"name":"startDate","required":false,"in":"query","description":"Start date filter","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date filter","schema":{"type":"string"}}],"responses":{"200":{"description":"Paginated list of competitions"}},"security":[{"JWT-auth":[]}],"summary":"Get all competitions with filters","tags":["Competitions"]},"post":{"operationId":"CompetitionsController_create_v2","parameters":[],"responses":{"201":{"description":"Competition created"}},"security":[{"JWT-auth":[]}],"summary":"Create a new competition","tags":["Competitions"]}},"/api/v2/competitions/{id}":{"get":{"operationId":"CompetitionsController_findOne_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Competition details"},"404":{"description":"Competition not found"}},"security":[{"JWT-auth":[]}],"summary":"Get competition by ID","tags":["Competitions"]},"patch":{"operationId":"CompetitionsController_update_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Competition updated"}},"security":[{"JWT-auth":[]}],"summary":"Update a competition","tags":["Competitions"]},"delete":{"operationId":"CompetitionsController_remove_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Competition deleted"}},"security":[{"JWT-auth":[]}],"summary":"Delete a competition","tags":["Competitions"]}},"/api/v2/competitions/{id}/duplicate":{"post":{"operationId":"CompetitionsController_duplicate_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"201":{"description":"Competition duplicated"}},"security":[{"JWT-auth":[]}],"summary":"Duplicate a competition","tags":["Competitions"]}},"/api/v2/competitions/{id}/validate":{"post":{"operationId":"CompetitionsController_validate_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Results validated"},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompetitionEntity"}}}}},"security":[{"JWT-auth":[]}],"summary":"Validate competition results","tags":["Competitions"]}},"/api/v2/competitions/reorganize":{"post":{"operationId":"CompetitionsController_reorganize_v2","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReorganizeCompetitionDto"}}}},"responses":{"200":{"description":"Races reorganized"}},"security":[{"JWT-auth":[]}],"summary":"Reorganize competition races","tags":["Competitions"]}},"/api/v2/races":{"get":{"operationId":"RacesController_findAll_v2","parameters":[{"name":"page","required":false,"in":"query","description":"Numéro de page","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Nombre d'éléments par page","schema":{"minimum":1,"default":50,"type":"number"}},{"name":"competitionId","required":false,"in":"query","description":"ID de la compétition","schema":{"type":"number"}},{"name":"licenceId","required":false,"in":"query","description":"ID de la licence","schema":{"type":"number"}},{"name":"raceCode","required":false,"in":"query","description":"Code de la course","schema":{"type":"string"}}],"responses":{"200":{"description":"Paginated list of races"}},"security":[{"JWT-auth":[]}],"summary":"Get all races with filters and pagination","tags":["Races"]},"post":{"operationId":"engage","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEngagementDto"}}}},"responses":{"201":{"description":"Rider engaged","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaceEntity"}}}},"400":{"description":"Validation error (rider number taken, already registered)"}},"security":[{"JWT-auth":[]}],"summary":"Engage a rider in a competition","tags":["Races"]}},"/api/v2/races/competition/{competitionId}":{"get":{"operationId":"getCompetitionRaces","parameters":[{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"List of races with rider information","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RaceRowDto"}}}}}},"security":[{"JWT-auth":[]}],"summary":"Get all race entries for a competition with rider info","tags":["Races"]},"delete":{"operationId":"RacesController_removeByCompetition_v2","parameters":[{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Races deleted"}},"security":[{"JWT-auth":[]}],"summary":"Delete all races for a competition","tags":["Races"]}},"/api/v2/races/palmares/{licenceId}":{"get":{"operationId":"getPalmares","parameters":[{"name":"licenceId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"List of past races with rankings","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PalmaresRowDto"}}}}}},"security":[{"JWT-auth":[]}],"summary":"Get palmares (race history) for a rider","tags":["Races"]}},"/api/v2/races/withpalmares/{query}":{"get":{"operationId":"getLicencesWithPalmares","parameters":[{"name":"query","required":true,"in":"path","description":"Search query (name)","schema":{"type":"string"}}],"responses":{"200":{"description":"List of licences with palmares","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LicenceEntity"}}}}}},"security":[{"JWT-auth":[]}],"summary":"Search licences that have at least one race in their palmares","tags":["Races"]}},"/api/v2/races/{id}":{"get":{"operationId":"RacesController_findOne_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Race details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaceEntity"}}}},"404":{"description":"Race not found"}},"security":[{"JWT-auth":[]}],"summary":"Get race entry by ID","tags":["Races"]},"patch":{"operationId":"RacesController_update_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Race updated"}},"security":[{"JWT-auth":[]}],"summary":"Update a race entry (generic)","tags":["Races"]},"delete":{"operationId":"deleteRace","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Race deleted"}},"security":[{"JWT-auth":[]}],"summary":"Delete a race entry (disengage rider)","tags":["Races"]}},"/api/v2/races/bulk":{"post":{"operationId":"RacesController_createMany_v2","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"201":{"description":"Races created"}},"security":[{"JWT-auth":[]}],"summary":"Create multiple race entries at once","tags":["Races"]}},"/api/v2/races/refresh/{licenceId}/{competitionId}":{"post":{"operationId":"refreshEngagement","parameters":[{"name":"licenceId","required":true,"in":"path","schema":{"type":"number"}},{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Engagement refreshed"},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaceEntity"}}}}},"security":[{"JWT-auth":[]}],"summary":"Refresh engagement data from licence info","tags":["Races"]}},"/api/v2/races/ranking":{"put":{"operationId":"updateRanking","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRankingDto"}}}},"responses":{"200":{"description":"Ranking updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaceEntity"}}}}},"security":[{"JWT-auth":[]}],"summary":"Update rider ranking (classify a rider)","tags":["Races"]}},"/api/v2/races/ranking/remove":{"put":{"operationId":"removeRanking","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRankingDto"}}}},"responses":{"200":{"description":"Ranking removed"}},"security":[{"JWT-auth":[]}],"summary":"Remove rider from ranking and reorder others","tags":["Races"]}},"/api/v2/races/ranking/reorder":{"put":{"operationId":"reorderRanking","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReorderRankingItemDto"}}}}},"responses":{"200":{"description":"Rankings reordered"}},"security":[{"JWT-auth":[]}],"summary":"Reorder rankings manually","tags":["Races"]}},"/api/v2/races/{id}/challenge":{"put":{"operationId":"flagChallenge","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Challenge flag toggled"}},"security":[{"JWT-auth":[]}],"summary":"Toggle sprint challenge flag","tags":["Races"]}},"/api/v2/races/{id}/chrono":{"patch":{"operationId":"updateChrono","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChronoDto"}}}},"responses":{"200":{"description":"Chrono updated"}},"security":[{"JWT-auth":[]}],"summary":"Update rider chrono time","tags":["Races"]}},"/api/v2/races/{id}/tours":{"patch":{"operationId":"updateTours","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateToursDto"}}}},"responses":{"200":{"description":"Tours updated"}},"security":[{"JWT-auth":[]}],"summary":"Update rider lap count","tags":["Races"]}},"/api/v2/races/results/upload/{competitionId}":{"post":{"operationId":"uploadResultsCsv","parameters":[{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"201":{"description":"Results uploaded"},"400":{"description":"Invalid CSV format or data"}},"security":[{"JWT-auth":[]}],"summary":"Upload race results from CSV file","tags":["Races"]}},"/api/v2/races/competition/{competitionId}/results":{"post":{"operationId":"RacesController_updateResults_v2","parameters":[{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"Results updated"},"201":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RaceEntity"}}}}}},"security":[{"JWT-auth":[]}],"summary":"Update race results in bulk for a competition","tags":["Races"]}},"/api/v2/clubs":{"get":{"operationId":"ClubsController_findAll_v2","parameters":[{"name":"fede","required":false,"in":"query","schema":{"enum":["FSGT","UFOLEP","FFC","CYCLOS","FFVELO","NL","FFTRI"],"type":"string"}},{"name":"dept","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of clubs"}},"security":[{"JWT-auth":[]}],"summary":"Get all clubs, optionally filtered by federation and department","tags":["Clubs"]},"post":{"operationId":"ClubsController_create_v2","parameters":[],"responses":{"201":{"description":"Club created"}},"security":[{"JWT-auth":[]}],"summary":"Create a new club","tags":["Clubs"]}},"/api/v2/clubs/{id}":{"get":{"operationId":"ClubsController_findOne_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Club details"}},"security":[{"JWT-auth":[]}],"summary":"Get club by ID","tags":["Clubs"]}},"/api/v2/challenges":{"get":{"operationId":"ChallengesController_findAll_v2","parameters":[{"name":"active","required":false,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"List of challenges"}},"security":[{"JWT-auth":[]}],"summary":"Get all challenges","tags":["Challenges"]},"post":{"operationId":"ChallengesController_create_v2","parameters":[],"responses":{"201":{"description":"Challenge created"}},"security":[{"JWT-auth":[]}],"summary":"Create a new challenge","tags":["Challenges"]}},"/api/v2/challenges/{id}":{"get":{"operationId":"ChallengesController_findOne_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Challenge details"},"404":{"description":"Challenge not found"}},"security":[{"JWT-auth":[]}],"summary":"Get challenge by ID","tags":["Challenges"]},"patch":{"operationId":"ChallengesController_update_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Challenge updated"}},"security":[{"JWT-auth":[]}],"summary":"Update a challenge","tags":["Challenges"]},"delete":{"operationId":"ChallengesController_remove_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Challenge deleted"}},"security":[{"JWT-auth":[]}],"summary":"Delete a challenge","tags":["Challenges"]}},"/api/v2/challenges/{id}/ranking":{"get":{"operationId":"ChallengesController_getRanking_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Challenge ranking","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChallengeRiderDto"}}}}}},"security":[{"JWT-auth":[]}],"summary":"Get challenge ranking","tags":["Challenges"]}},"/api/v2/challenges/{id}/competitions/{competitionId}":{"post":{"operationId":"ChallengesController_addCompetition_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Competition added to challenge"},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChallengeEntity"}}}}},"security":[{"JWT-auth":[]}],"summary":"Add a competition to a challenge","tags":["Challenges"]},"delete":{"operationId":"ChallengesController_removeCompetition_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"competitionId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Competition removed from challenge"}},"security":[{"JWT-auth":[]}],"summary":"Remove a competition from a challenge","tags":["Challenges"]}},"/api/v2/dashboard":{"get":{"operationId":"DashboardController_getSummary_v2","parameters":[],"responses":{"200":{"description":"Dashboard summary with stats"}},"security":[{"JWT-auth":[]}],"summary":"Get dashboard summary","tags":["Dashboard"]}},"/api/v2/dashboard/stats":{"get":{"operationId":"DashboardController_getStats_v2","parameters":[{"name":"federation","required":false,"in":"query","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"startDate","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Dashboard statistics"}},"security":[{"JWT-auth":[]}],"summary":"Get dashboard statistics","tags":["Dashboard"]}},"/api/v2/dashboard/recent":{"get":{"operationId":"DashboardController_getRecentActivity_v2","parameters":[{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Recent competitions and races"}},"security":[{"JWT-auth":[]}],"summary":"Get recent activity","tags":["Dashboard"]}},"/api/v2/dashboard/charts/riders-per-competition":{"get":{"operationId":"DashboardController_getRidersPerCompetition_v2","parameters":[{"name":"startDate","required":false,"in":"query","description":"Start date filter","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date filter","schema":{"type":"string"}},{"name":"fedes","required":false,"in":"query","description":"Federations filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionTypes","required":false,"in":"query","description":"Competition types filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionDepts","required":false,"in":"query","description":"Competition departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"riderDepts","required":false,"in":"query","description":"Rider departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"clubs","required":false,"in":"query","description":"Clubs filter","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Riders per competition chart data"}},"security":[{"JWT-auth":[]}],"summary":"Get riders count per competition","tags":["Dashboard"]}},"/api/v2/dashboard/charts/club-participation":{"get":{"operationId":"DashboardController_getClubParticipation_v2","parameters":[{"name":"startDate","required":false,"in":"query","description":"Start date filter","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date filter","schema":{"type":"string"}},{"name":"fedes","required":false,"in":"query","description":"Federations filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionTypes","required":false,"in":"query","description":"Competition types filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionDepts","required":false,"in":"query","description":"Competition departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"riderDepts","required":false,"in":"query","description":"Rider departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"clubs","required":false,"in":"query","description":"Clubs filter","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Club participation chart data"}},"security":[{"JWT-auth":[]}],"summary":"Get club participation stats","tags":["Dashboard"]}},"/api/v2/dashboard/charts/catea-distribution":{"get":{"operationId":"DashboardController_getCateaDistribution_v2","parameters":[{"name":"startDate","required":false,"in":"query","description":"Start date filter","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date filter","schema":{"type":"string"}},{"name":"fedes","required":false,"in":"query","description":"Federations filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionTypes","required":false,"in":"query","description":"Competition types filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionDepts","required":false,"in":"query","description":"Competition departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"riderDepts","required":false,"in":"query","description":"Rider departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"clubs","required":false,"in":"query","description":"Clubs filter","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Age category distribution chart data"}},"security":[{"JWT-auth":[]}],"summary":"Get age category distribution","tags":["Dashboard"]}},"/api/v2/dashboard/charts/catev-distribution":{"get":{"operationId":"DashboardController_getCatevDistribution_v2","parameters":[{"name":"startDate","required":false,"in":"query","description":"Start date filter","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date filter","schema":{"type":"string"}},{"name":"fedes","required":false,"in":"query","description":"Federations filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionTypes","required":false,"in":"query","description":"Competition types filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionDepts","required":false,"in":"query","description":"Competition departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"riderDepts","required":false,"in":"query","description":"Rider departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"clubs","required":false,"in":"query","description":"Clubs filter","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Value category distribution chart data"}},"security":[{"JWT-auth":[]}],"summary":"Get value category distribution","tags":["Dashboard"]}},"/api/v2/dashboard/charts/top-riders":{"get":{"operationId":"DashboardController_getTopRiders_v2","parameters":[{"name":"startDate","required":false,"in":"query","description":"Start date filter","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date filter","schema":{"type":"string"}},{"name":"fedes","required":false,"in":"query","description":"Federations filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionTypes","required":false,"in":"query","description":"Competition types filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"competitionDepts","required":false,"in":"query","description":"Competition departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"riderDepts","required":false,"in":"query","description":"Rider departments filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"clubs","required":false,"in":"query","description":"Clubs filter","schema":{"type":"array","items":{"type":"string"}}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Top riders chart data"}},"security":[{"JWT-auth":[]}],"summary":"Get top 50 most active riders","tags":["Dashboard"]}},"/api/v2/users":{"get":{"operationId":"UsersController_findAll_v2","parameters":[{"name":"offset","required":false,"in":"query","description":"Number of records to skip","schema":{"minimum":0,"default":0,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of records to return","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Global search term","schema":{"type":"string"}},{"name":"orderBy","required":false,"in":"query","description":"Field to order by","schema":{"type":"string"}},{"name":"orderDirection","required":false,"in":"query","schema":{"default":"ASC","type":"string","enum":["ASC","DESC"]}},{"name":"email","required":false,"in":"query","description":"Filter by email","schema":{"type":"string"}},{"name":"firstName","required":false,"in":"query","description":"Filter by first name","schema":{"type":"string"}},{"name":"lastName","required":false,"in":"query","description":"Filter by last name","schema":{"type":"string"}},{"name":"phone","required":false,"in":"query","description":"Filter by phone","schema":{"type":"string"}},{"name":"role","required":false,"in":"query","description":"Filter by role","schema":{"type":"string"}}],"responses":{"200":{"description":"Paginated list of users"}},"security":[{"JWT-auth":[]}],"summary":"Get all users with pagination (admin only)","tags":["Users"]},"post":{"operationId":"UsersController_create_v2","parameters":[],"responses":{"201":{"description":"User created"},"409":{"description":"Email already exists"}},"security":[{"JWT-auth":[]}],"summary":"Create a new user (admin only)","tags":["Users"]}},"/api/v2/users/{id}":{"get":{"operationId":"UsersController_findOne_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"User details"},"404":{"description":"User not found"}},"security":[{"JWT-auth":[]}],"summary":"Get user by ID (admin only)","tags":["Users"]},"patch":{"operationId":"UsersController_update_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"User updated"}},"security":[{"JWT-auth":[]}],"summary":"Update a user (admin only)","tags":["Users"]},"delete":{"operationId":"UsersController_remove_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"User deleted"}},"security":[{"JWT-auth":[]}],"summary":"Delete a user (admin only)","tags":["Users"]}},"/api/v2/users/{id}/password":{"patch":{"operationId":"UsersController_updatePassword_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Password updated"},"409":{"description":"Current password is incorrect"}},"security":[{"JWT-auth":[]}],"summary":"Update user password","tags":["Users"]}},"/api/v2/users/{id}/reset-password":{"post":{"operationId":"UsersController_resetPassword_v2","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Password reset"},"201":{"description":""}},"security":[{"JWT-auth":[]}],"summary":"Reset user password (admin only)","tags":["Users"]}}},"info":{"title":"Open Dossard API v2","description":"API pour la gestion des courses cyclistes","version":"2.0","contact":{}},"tags":[{"name":"Auth","description":"Authentification et gestion des sessions"},{"name":"Licences","description":"Gestion des licences coureurs"},{"name":"Competitions","description":"Gestion des compétitions"},{"name":"Races","description":"Gestion des engagements et résultats"},{"name":"Clubs","description":"Gestion des clubs"},{"name":"Challenges","description":"Gestion des challenges"},{"name":"Dashboard","description":"Statistiques et graphiques"},{"name":"Users","description":"Administration des utilisateurs"}],"servers":[],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"Enter JWT token","in":"header"}},"schemas":{"LoginDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","minLength":4,"example":"password123"}},"required":["email","password"]},"AuthResponseDto":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"number"},"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}}},"required":["id","email","firstName","lastName","roles"]}},"required":["accessToken","refreshToken","user"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"TokensDto":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}},"required":["accessToken","refreshToken"]},"CreateLicenceDto":{"type":"object","properties":{"name":{"type":"string","example":"DUPONT"},"firstName":{"type":"string","example":"Jean"},"licenceNumber":{"type":"string","example":"12345678"},"gender":{"type":"string","enum":["H","F"],"example":"H"},"birthYear":{"type":"string","example":"1985"},"dept":{"type":"string","minLength":2,"maxLength":3,"example":"31"},"fede":{"enum":["FSGT","UFOLEP","FFC","CYCLOS","FFVELO","NL","FFTRI"],"type":"string","example":"FSGT"},"club":{"type":"string","example":"VC Toulouse"},"catea":{"type":"string","example":"Senior 1"},"catev":{"type":"string","example":"2ème catégorie"},"catevCX":{"type":"string","example":"2ème catégorie"},"saison":{"type":"string","example":"2024"},"comment":{"type":"string"}},"required":["name","firstName","gender","birthYear","dept","fede","catea","saison"]},"UpdateLicenceDto":{"type":"object","properties":{"name":{"type":"string","example":"DUPONT"},"firstName":{"type":"string","example":"Jean"},"licenceNumber":{"type":"string","example":"12345678"},"gender":{"type":"string","enum":["H","F"],"example":"H"},"birthYear":{"type":"string","example":"1985"},"dept":{"type":"string","minLength":2,"maxLength":3,"example":"31"},"fede":{"enum":["FSGT","UFOLEP","FFC","CYCLOS","FFVELO","NL","FFTRI"],"type":"string","example":"FSGT"},"club":{"type":"string","example":"VC Toulouse"},"catea":{"type":"string","example":"Senior 1"},"catev":{"type":"string","example":"2ème catégorie"},"catevCX":{"type":"string","example":"2ème catégorie"},"saison":{"type":"string","example":"2024"},"comment":{"type":"string"}}},"ClubEntity":{"type":"object","properties":{"id":{"type":"number"},"shortName":{"type":"string"},"longName":{"type":"string"},"dept":{"type":"string"},"elicenceName":{"type":"string"},"fede":{"enum":["FSGT","UFOLEP","FFC","CYCLOS","FFVELO","NL","FFTRI"],"type":"string"}},"required":["id","longName"]},"CompetitionEntity":{"type":"object","properties":{"id":{"type":"number"},"eventDate":{"format":"date-time","type":"string"},"club":{"$ref":"#/components/schemas/ClubEntity"},"clubId":{"type":"number"},"name":{"type":"string"},"zipCode":{"type":"string"},"info":{"type":"string"},"categories":{"type":"string"},"observations":{"type":"string"},"pricing":{"type":"array","items":{"type":"object"}},"races":{"type":"string"},"fede":{"enum":["FSGT","UFOLEP","FFC","CYCLOS","FFVELO","NL","FFTRI"],"type":"string"},"competitionType":{"enum":["CX","ROUTE","VTT"],"type":"string"},"competitionInfo":{"type":"array","items":{"type":"object"}},"lieuDossard":{"type":"string"},"lieuDossardGPS":{"type":"string"},"longueurCircuit":{"type":"string"},"siteweb":{"type":"string"},"facebook":{"type":"string"},"contactEmail":{"type":"string"},"contactPhone":{"type":"string"},"contactName":{"type":"string"},"openedToOtherFede":{"type":"boolean"},"openedNL":{"type":"boolean"},"dept":{"type":"string"},"rankingUrl":{"type":"string"},"commissaires":{"type":"string"},"speaker":{"type":"string"},"aboyeur":{"type":"string"},"feedback":{"type":"string"},"resultsValidated":{"type":"boolean"},"photoUrls":{"type":"array","items":{"type":"object"}},"rankingUrls":{"type":"array","items":{"type":"object"}},"avecChrono":{"type":"boolean"},"registrationUrls":{"type":"array","items":{"type":"object"}}},"required":["id","eventDate","zipCode","categories","races","fede","competitionType"]},"ReorganizeCompetitionDto":{"type":"object","properties":{"competitionId":{"type":"number","description":"Competition ID"},"races":{"description":"New races configuration","type":"array","items":{"type":"string"}}},"required":["competitionId","races"]},"RaceRowDto":{"type":"object","properties":{"id":{"type":"number"},"raceCode":{"type":"string"},"catev":{"type":"string"},"catea":{"type":"string"},"chrono":{"type":"string"},"tours":{"type":"number"},"riderNumber":{"type":"number"},"rankingScratch":{"type":"number"},"numberMin":{"type":"number"},"numberMax":{"type":"number"},"licenceId":{"type":"number"},"licenceNumber":{"type":"string"},"sprintchallenge":{"type":"boolean"},"comment":{"type":"string"},"competitionId":{"type":"number"},"competitionName":{"type":"string"},"competitionDate":{"format":"date-time","type":"string"},"competitionType":{"type":"string"},"competitionRaces":{"type":"array","items":{"type":"string"}},"name":{"type":"string","description":"Nom complet du coureur (NOM Prénom)"},"riderName":{"type":"string","description":"Nom du coureur seul"},"club":{"type":"string"},"gender":{"type":"string"},"dept":{"type":"string"},"fede":{"type":"string"},"birthYear":{"type":"string"},"surclassed":{"type":"boolean","description":"Coureur surclassé"}},"required":["id","raceCode","catev","riderNumber","licenceId","competitionId","name"]},"PalmaresRowDto":{"type":"object","properties":{"id":{"type":"number"},"raceCode":{"type":"string"},"catev":{"type":"string"},"catea":{"type":"string"},"chrono":{"type":"string"},"tours":{"type":"number"},"riderNumber":{"type":"number"},"rankingScratch":{"type":"number"},"numberMin":{"type":"number"},"numberMax":{"type":"number"},"licenceId":{"type":"number"},"licenceNumber":{"type":"string"},"sprintchallenge":{"type":"boolean"},"comment":{"type":"string"},"competitionId":{"type":"number"},"competitionName":{"type":"string"},"competitionDate":{"format":"date-time","type":"string"},"competitionType":{"type":"string"},"competitionRaces":{"type":"array","items":{"type":"string"}},"name":{"type":"string","description":"Nom complet du coureur (NOM Prénom)"},"riderName":{"type":"string","description":"Nom du coureur seul"},"club":{"type":"string"},"gender":{"type":"string"},"dept":{"type":"string"},"fede":{"type":"string"},"birthYear":{"type":"string"},"surclassed":{"type":"boolean","description":"Coureur surclassé"},"rankingInCategory":{"type":"number","description":"Classement dans la catégorie (calculé)"}},"required":["id","raceCode","catev","riderNumber","licenceId","competitionId","name"]},"LicenceEntity":{"type":"object","properties":{"id":{"type":"number"},"licenceNumber":{"type":"string"},"name":{"type":"string"},"firstName":{"type":"string"},"gender":{"type":"string"},"club":{"type":"string"},"dept":{"type":"string"},"birthYear":{"type":"string"},"catea":{"type":"string"},"catev":{"type":"string"},"catevCX":{"type":"string"},"fede":{"enum":["FSGT","UFOLEP","FFC","CYCLOS","FFVELO","NL","FFTRI"],"type":"string"},"saison":{"type":"string"},"author":{"type":"string"},"lastChanged":{"format":"date-time","type":"string"},"comment":{"type":"string"}},"required":["id","fede"]},"RaceEntity":{"type":"object","properties":{"id":{"type":"number"},"competition":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/CompetitionEntity"}]},"competitionId":{"type":"number"},"licence":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/LicenceEntity"}]},"licenceId":{"type":"number"},"raceCode":{"type":"string","nullable":true},"catev":{"type":"string","nullable":true},"catea":{"type":"string","nullable":true},"riderNumber":{"type":"number","nullable":true},"rankingScratch":{"type":"number","nullable":true},"numberMin":{"type":"number","nullable":true},"numberMax":{"type":"number","nullable":true},"surclassed":{"type":"boolean","nullable":true},"comment":{"type":"string","nullable":true},"sprintchallenge":{"type":"boolean","nullable":true},"club":{"type":"string","nullable":true},"chrono":{"type":"string","nullable":true},"tours":{"type":"number","nullable":true}},"required":["id"]},"CreateEngagementDto":{"type":"object","properties":{"competitionId":{"type":"number","description":"ID de la compétition"},"licenceId":{"type":"number","description":"ID de la licence du coureur"},"raceCode":{"type":"string","description":"Code de la course (ex: \"1\", \"2/3\")"},"riderNumber":{"type":"number","minimum":1,"description":"Numéro de dossard"},"catev":{"type":"string","description":"Catégorie valeur (1, 2, 3, J, C, M...)"},"catea":{"type":"string","description":"Catégorie âge (S, V, SV, A...)"},"club":{"type":"string","description":"Club du coureur"},"rankingScratch":{"type":"number","description":"Classement scratch (si saisie résultats)"}},"required":["competitionId","licenceId","raceCode","riderNumber","catev"]},"UpdateRankingDto":{"type":"object","properties":{"riderNumber":{"type":"number","description":"Numéro de dossard"},"raceCode":{"type":"string","description":"Code de la course"},"competitionId":{"type":"number","description":"ID de la compétition"},"rankingScratch":{"type":"number","description":"Classement scratch"},"comment":{"type":"string","description":"Commentaire (ABD, DSQ, NC, NP, CHT)"}},"required":["riderNumber","raceCode","competitionId"]},"RemoveRankingDto":{"type":"object","properties":{"id":{"type":"number","description":"ID de l'engagement"},"raceCode":{"type":"string","description":"Code de la course"},"competitionId":{"type":"number","description":"ID de la compétition"}},"required":["id","raceCode","competitionId"]},"ReorderRankingItemDto":{"type":"object","properties":{"id":{"type":"number","description":"ID de l'engagement"},"comment":{"type":"string","description":"Commentaire (ABD, DSQ...)"}},"required":["id"]},"UpdateChronoDto":{"type":"object","properties":{"chrono":{"type":"string","description":"Chrono au format HH:MM:SS ou MM:SS"}},"required":["chrono"]},"UpdateToursDto":{"type":"object","properties":{"tours":{"type":"number","description":"Nombre de tours"}}},"ChallengeRaceRowDto":{"type":"object","properties":{"licenceId":{"type":"string","description":"Licence ID"},"competitionId":{"type":"number","description":"Competition ID"},"competitionName":{"type":"string","description":"Competition name"},"eventDate":{"format":"date-time","type":"string","description":"Event date"},"catev":{"type":"string","description":"Category (catev)"},"rankingScratch":{"type":"number","description":"Ranking scratch"},"nbParticipants":{"type":"number","description":"Number of participants"},"comment":{"type":"string","description":"Race comment (DNF, DNS, etc.)"},"sprintchallenge":{"type":"boolean","description":"Sprint challenge bonus"},"ptsRace":{"type":"number","description":"Points for this race"},"explanation":{"type":"string","description":"Explanation of points calculation"}},"required":["licenceId","competitionId","competitionName","eventDate","catev","rankingScratch","nbParticipants"]},"ChallengeRiderDto":{"type":"object","properties":{"licenceId":{"type":"string","description":"Licence ID"},"name":{"type":"string","description":"Last name"},"firstName":{"type":"string","description":"First name"},"gender":{"type":"string","description":"Gender (H/F)"},"currentLicenceCatev":{"type":"string","description":"Current licence catev"},"currentLicenceCatea":{"type":"string","description":"Current licence catea"},"currentClub":{"type":"string","description":"Current club"},"sprintchallenge":{"type":"boolean","description":"Sprint challenge status"},"challengeRaceRows":{"description":"Race results","type":"array","items":{"$ref":"#/components/schemas/ChallengeRaceRowDto"}},"ptsAllRaces":{"type":"number","description":"Total points for all races"},"explanation":{"type":"string","description":"Explanation of total points calculation"}},"required":["licenceId","name","firstName","gender","currentLicenceCatev","currentLicenceCatea","currentClub","challengeRaceRows","ptsAllRaces"]},"ChallengeEntity":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"description":{"type":"string"},"reglement":{"type":"string"},"active":{"type":"boolean"},"competitionIds":{"type":"array","items":{"type":"number"}},"bareme":{"type":"string"},"competitionType":{"type":"string"}},"required":["id","name"]}}}}